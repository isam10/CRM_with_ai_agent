{% extends "main.html" %}

{% block title %}Home{% endblock %}

{% block content %}

<h1 class="typing-container" id="typing-text"></h1>

{% if user.is_authenticated %}
<div class="content-area">
    {% csrf_token %}
    <div class="top-row">
        <a href="{% url 'chatquery' %}" class="content-box"><i class="fas fa-chart-line"></i> Natural Language Queries </a>
        <a href="{%url 'sales' %}"class="content-box"><i class="fas fa-users"></i>Predictive Analytics</a>
    </div>
    {% csrf_token %}
    <div class="bottom-row">
        <a href="{% url 'predictions' %}" class="content-box"><i class="fas fa-envelope"></i>Automated Workflows</a>
    </div>
</div>
{% else %}

<div class="logged-out-container">
    <div class="top-features">
        <div class="feature-card left-card">
            <div class="feature-icon">
                <i class="fas fa-comment-dots"></i>
            </div>
            <h3>Natural Language Queries</h3>
            <p>Ask questions like "Show top 2023 customers"</p>
        </div>

        <div class="feature-card right-card">
            <div class="feature-icon">
                <i class="fas fa-brain"></i>
            </div>
            <h3>Predictive Analytics</h3>
            <p>AI-powered forecasts & trends detection</p>
        </div>
    </div>
    
    <div class="feature-card bottom-card">
        <div class="feature-icon">
            <i class="fas fa-bolt"></i>
        </div>
        <h3>Automated Workflows</h3>
        <p>Smart triggers & auto-generated reports</p>
    </div>
</div>
{% endif %}


<div class="floating-elements">
    <div class="circle small"></div>
    <div class="circle medium"></div>
    <div class="circle large"></div>
    <div class="wave"></div>
</div>

<style>
   
    body {
        background: #f5f7fa;
        overflow-x: hidden;
        position: relative;
    }

    .content-area {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 20px;
        margin-top: 40px;
    }

    .top-row, .bottom-row {
        display: flex;
        gap: 20px;
        justify-content: center;
    }

    .content-box {
        width: 260px;
        background: rgba(255, 255, 255, 0.8);
        padding: 45px;
        border-radius: 15px;
        box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.1);
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease-in-out;
        text-decoration: none;
        font-size: 1.3rem;
        font-weight: bold;
        color: black;
        position: relative;
        overflow: hidden;
    }

    .content-box:hover {
        transform: translateY(-6px);
        box-shadow: 0px 6px 20px rgba(0, 0, 0, 0.2);
    }

    .floating-elements {
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
        z-index: -1;
        top: 0;
        left: 0;
    }

    .circle {
        position: absolute;
        border-radius: 50%;
        opacity: 0.2;
        animation: floatAnimation 8s infinite alternate ease-in-out;
    }

    .small {
        width: 80px;
        height: 80px;
        background: #ff9a9e;
        top: 10%;
        left: 10%;
    }

    .medium {
        width: 120px;
        height: 120px;
        background: #fad0c4;
        top: 50%;
        left: 60%;
    }

    .large {
        width: 180px;
        height: 180px;
        background: #fbc2eb;
        top: 70%;
        left: 30%;
    }

    @keyframes floatAnimation {
        0% { transform: translateY(0px); }
        100% { transform: translateY(30px); }
    }

    .wave {
        position: absolute;
        bottom: 0;
        width: 100%;
        height: 100px;
        background: url('https://upload.wikimedia.org/wikipedia/commons/4/49/Blue_wave.svg');
        background-size: cover;
        opacity: 0.1;
        animation: waveAnimation 4s infinite linear;
    }

    @keyframes waveAnimation {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50px); }
    }

    .typing-container {
        font-size: 2.5rem;
        font-weight: bold;
        white-space: nowrap;
        overflow: hidden;
        display: inline-block;
        border-right: 3px solid black;
        padding-right: 5px;
        min-height: 50px;
        color: #333;
    }

   
    .logged-out-container {
        max-width: 1200px;
        margin: 40px auto;
        padding: 0 20px;
    }

    .top-features {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
        margin-bottom: 30px;
    }

    .feature-card {
        background: rgba(255,255,255,0.9);
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        text-align: center;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
        position: relative;
        overflow: hidden;
    }

    .feature-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, rgba(74,144,226,0.1) 0%, rgba(255,255,255,0) 100%);
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .feature-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    .feature-card:hover::before {
        opacity: 1;
    }

    .bottom-card {
        max-width: 600px;
        margin: 0 auto;
    }

    .feature-icon i {
        font-size: 2.5rem;
        color: #4a90e2;
        margin-bottom: 15px;
        transition: transform 0.3s ease;
    }

    .feature-card:hover .feature-icon i {
        transform: scale(1.1);
    }

    .feature-card h3 {
        color: #333;
        margin: 15px 0;
        font-size: 1.5rem;
        transition: color 0.3s ease;
    }

    .feature-card p {
        color: #666;
        line-height: 1.5;
        font-size: 1rem;
        transition: color 0.3s ease;
    }

    /* Mobile Optimization */
    @media (max-width: 768px) {
        .top-features {
            gap: 20px;
            margin-bottom: 20px;
        }

        .feature-card {
            padding: 25px 20px;
            margin: 0 0 15px 0;
        }

        .bottom-card {
            margin: 0 auto;
            max-width: 100%;
        }

        .feature-icon i {
            font-size: 2rem;
        }

        .feature-card h3 {
            font-size: 1.3rem;
        }

        .feature-card p {
            font-size: 0.9rem;
        }

        .typing-container {
            font-size: 2rem;
        }
    }

    @media (max-width: 480px) {
        .feature-card {
            padding: 20px 15px;
        }

        .feature-icon i {
            font-size: 1.8rem;
        }

        .feature-card h3 {
            font-size: 1.2rem;
        }

        .feature-card p {
            font-size: 0.85rem;
        }
    }
</style>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        
        let text = "Welcome to CRM AI Features";
        let typingElement = document.getElementById("typing-text");
        let index = 0;
        let speed = 100;
        let eraseSpeed = 50;
        let cursorVisible = true;

        function typeWriter() {
            if (index < text.length) {
                typingElement.innerHTML = text.substring(0, index + 1) + (cursorVisible ? "|" : "");
                index++;
                setTimeout(typeWriter, speed);
            } else {
                setTimeout(eraseText, 1000);
            }
        }

        function eraseText() {
            if (index > 0) {
                typingElement.innerHTML = text.substring(0, index - 1) + (cursorVisible ? "|" : "");
                index--;
                setTimeout(eraseText, eraseSpeed);
            } else {
                setTimeout(typeWriter, 500);
            }
        }

        function blinkCursor() {
            cursorVisible = !cursorVisible;
            typingElement.innerHTML = text.substring(0, index) + (cursorVisible ? "|" : "");
            setTimeout(blinkCursor, 500);
        }

        typeWriter();
        blinkCursor();

        document.querySelectorAll('.feature-card').forEach(card => {
            card.addEventListener('touchstart', function() {
                this.classList.add('hover-effect');
            });
            
            card.addEventListener('touchend', function() {
                this.classList.remove('hover-effect');
            });
        });
    });
</script>

{% endblock %}